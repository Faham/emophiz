
%------------------------------------------------------------------------------

\documentclass[conference]{IEEEtran}
\usepackage{blindtext}
\usepackage[pdftex]{graphicx}
\input{common.tex}

%------------------------------------------------------------------------------

\usepackage[pdftex,
            pdfauthor={Faham Negini},
            pdftitle={Driving Dynamic Difficulty Adjustments from Affective State},
            pdfsubject={An IEEE Paper from the Department of Computer Science at the University of Saskatchewan},
            pdfkeywords={Affective Computing, Biometrics, Play, Games, Physiology, Fuzzy Logic, Dynamic Difficulty Adjustment},
            pdfproducer={Latex},
            pdfcreator={pdflatex}]{hyperref}

%------------------------------------------------------------------------------

\graphicspath{{images/}}
\DeclareGraphicsExtensions{.pdf,.jpeg,.png}

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}
\begin{document}

%------------------------------------------------------------------------------

\title{Driving Dynamic Difficulty Adjustment in a First-Person Shooter Game from Affective State}

\author{\IEEEauthorblockN
{removed for blind review}
%{Faham Negini\IEEEauthorrefmark{1},
%Mehdi Rostami\IEEEauthorrefmark{2},
%Regan L. Mandryk\IEEEauthorrefmark{3},
%Kevin G. Stanley\IEEEauthorrefmark{4}} and
%Amin Tavassolian\IEEEauthorrefmark{5}
%\IEEEauthorblockA{\IEEEauthorrefmark{1}DISCUS Lab, %Department of Computer Science\\
%University of Saskatchewan\\
%Phone: +1 306 966 1947\\
%Email: faham.negini@usask.ca}
}

\maketitle

%------------------------------------------------------------------------------

\begin{abstract}
\label{sec:abs}
% TODO: abstract
\end{abstract}

\begin{IEEEkeywords}
Affective Computing, Biometrics, Play, Games, Physiology, Fuzzy Logic, Dynamic Difficulty Adjustment.
\end{IEEEkeywords}

\IEEEpeerreviewmaketitle

%------------------------------------------------------------------------------

\section{Introduction}
\label{sec:intro}

% gtg
%Since computers are playing a significant role in our daily life, the need for a more friendly and natural communication interface between human and computer has continuously increased. Making computers capable of perceiving the situation in terms of most human specific factors and responding dependent to this perception is of major steps to acquire this goal. If computers could recognize the situation the same way as human does, they would be much more natural to communicate. Emotions are of important and mysterious human attributes that have a great effect on people's day to day behavior. Researches from neuroscience, psychology, and cognitive science, suggests that emotion plays critical roles in rational and intelligent behavior ~\cite{picard2001toward}. Apparently, emotion interacts with thinking in ways that are non-obvious but important for intelligent functioning ~\cite{picard2001toward}. Scientists have amassed evidence that emotional skills are a basic component of intelligence, especially for learning preferences and adapting to what is important ~\cite{mayer1993intelligence, goleman2006emotional} People used to express their emotions through facial expressions, body movement, gestures and tone of voice and expect others understand and answer to their affective state. But sometimes there is a distinction between inner emotional experiences and the outward emotional expressions ~\cite{picard2003affective}. Some emotions can be hard to recognize by humans, and inner emotional experiences may not be expressed outwardly ~\cite{jones2007biometric}. Recent extensive investigations of physiological signals for emotion detection have been providing encouraging results where affective states are directly related to change in inner bodily signals ~\cite{jones2007biometric}. However whether we can use physiological patterns to recognize distinct emotions is still a question ~\cite{picard2001toward, cacioppo1990inferring}.

% gtg
%Although the study of affective computing has increased considerably during the last years, few have applied their research to play technologies ~\cite{sykes2003affective}. Emotional component of human computer interaction in video games is surprisingly important. Game players frequently turn to the console in their search for an emotional experience ~\cite{rouse2010game}. There are numerous benefits such technology could bring video game experience, like: The ability to generate game content dynamically with respect to the affective state of the player, the ability to communicate the affective state of the game player to third parties and adoption of new game mechanics based on the affective state of the player ~\cite{sykes2003affective}. This work concentrates on developing a real-time emotion recognition system for play technologies which can quantify player instant emotional state during a play experience. 

Computer games have been widely adopted as a form of entertainment. In 2013, 58\% of Americans identified themselves as computer gamers, and 32\% under the age of 18, 32\% between the age of 18 and 36\% above the age of 36. With the expansion of the computer gaming demographic, comes an expansion of interests, ability and responsiveness. The gamer demographic can no longer be considered homogeneous, if it even ever was. In response to this changing demographic, game developers have provided more choices in how many AAA titles are played. While originally innovative, the concept of being able to complete a level by tactical prowess, controller skill, or stealth for example is now a mainstay of most adventure games. While these kinds of design decisions can help support a multitude of play styles in the expanded gamer demographic, it cannot react to changes in skill or mood of an individual player on a day to day basis or throughout a given play session.

While it is possible to adapt a game to the measured performance of a player, particularly in a multiplayer setting (ref game balance stuff) it is harder to react to the players mood. This is difficult for two reasons, first because despite significant advances in affective computing (cite affcomp stuff) it is still difficult to reliably extract mood in real time, and second because it is unclear what the design feedback mechanism should be to address changes in player mood in real-time or near real time. Even if they could reliably detect mood, designers have no validated guidelines to determine how the game mechanics should be adjusted to enhance player experience.

Xiang et al. provided an emotion based dynamic game adjusting prototype, which utilizes facial expression captured using a camera ~\cite{xiang2013dynamic}. Sykes and Brown have shown data from gamepad correlates with a player's level of arousal during game play  ~\cite{sykes2003affective}. Aggag and Revett in their work on affective gaming with use of the GSR signal, have developed a basic First-Person Shooter (FPS) that was supposed to be played in two different difficulty levels interleavingly ~\cite{aggag2011affective}. They have considered players' arousal level as a function of the difficulty of the game. Tijs et al. study on Stimulus has shown the unguided adaption of players speed has resulted the slow-mode being too slow and the fast-mode being a bit too fast for some players and described their work on induction of boredom, frustration and enjoyment through manipulation of the game mechanic \"speed\" partly successful ~\cite{tijs2009creating}. 

In this paper we build on the work of Mandryk and Atkins ~\cite{mandryk2007fuzzy} to create a system which provides real time feedback based on player arousal. Our primary contribution is not the mapping of arousal to game state, but an understanding of how design decisions surrounding the feedback effect player experience. We created a custom zombie survival level for Half-Life 2 – a popular first person shooter – as a test bed, and interfaced it with a system which inferred arousal from GSR signals. Arousal state was then fed back to the player through changing aspects of the player’s avatar, the zombie opponents or the surrounding environment. After controlled laboratory studies, we found that players preferred feedback through avatar adaptation to the other two manipulations.

The rest of the paper is organized as follows: in Section ~\ref{sec:lit-review} we outline different emotion recognition theories with an overview of physiology sensors and the concept of flow in video games. In Section ~\ref{sec:impl} we demonstrate some implementation details of the system. We then describe the experimental setup in Section ~\ref{sec:exprm} before giving our results in Section ~\ref{sec:res}. Finally, we discuss the results in Section ~\ref{sec:discus} and give conclusions in Section ~\ref{sec:conclusion}.

%------------------------------------------------------------------------------

\section{Background}
\label{sec:lit-review}

% gtg
Using emotional responses to increase the level of users interaction with a real-time play technology requires an effective technique to identifying specific emotion states within an emotional space. Major existing emotion models in the psychology literature includes: basic emotion theory ~\cite{ekman1992argument, ekman1992there}, dimensional emotion theory ~\cite{lang1995emotion, russell1980circumplex} and models from appraisal theory (e.g.,~\cite{roseman2001model}) ~\cite{zhang2010service}

% gtg
Classical attempts to describe emotion can be categorized into two major different approaches: Those that try to describe emotion by emphasizing its cognitive (mental) aspects and those that concentrate on its bodily (physical) aspects. Walter Cannon by suggesting emotion as an experience within the brain, independent of the sensations of the body ~\cite{cannon1927james} is usually credited for the cognitive approach. On the other hand the physical approach has largely been attributed to William James in which physiological responses (e.g. elevated heart rate) are the center of focus that occurs just prior or during an emotional episode ~\cite{paiva2007affective}.

% gtg
Discrete categories, also known as the basic emotion theory largely relies on language in its mission to describe emotion; In fact, it begins by identifying specific labels people attach to different emotional episodes and then suggests categories of emotions. Examples of such labels (or categories) include excitement, anger, fear, sadness and happiness. Recent works on the basic emotion theory identifies anger, disgust, fear, happiness, sadness, and surprise ~\cite{peter2006emotion} as the concise set of primary emotions. These are actually the least six universal categories researchers agreed upon ~\cite{zagalo2004story}. It also claims these primary emotions are distinguishable from each other and other affective phenomena ~\cite{dalgleish1999handbook}.

% gtg
The dimensional emotion theory argues that all emotional states reside in a two-dimensional space, defined by arousal and valence. This approach described by Russell in ~\cite{russell2003core} introduces the idea of core affect to identify emotions. It holds core affect accountable for feelings triggered by specific events and describes it as being composed of two independent dimensions: arousal and valence. Figure ~\ref{fig:russel-av-space} illustrates the concept of arousal and valence space describing various emotions known as common emotion categories.

% gtg
Lang used a 2-D space defined by arousal and valence (pleasure) (AV space) to classify emotions ~\cite{lang1995emotion}. Valence is described as a subjective feeling of pleasantness or unpleasantness while arousal is the subjective state feeling activated or deactivated ~\cite{barrett1998discrete}. Using an arousal-valence space to create the Affect Grid, Russell believed that arousal and valence are cognitive dimensions of individual emotion states. Affect is a broad definition that includes feelings, moods, sentiments etc. and is commonly used to define the concept of emotion ~\cite{picard2003affective}. Russell's model has two axes that might be labeled as displeasure/pleasure (horizontal axis) and low/high arousal (vertical axis) It is not easy to map affective states into distinctive emotional states, However these models can provide a mapping between predefined states and the level of arousal and valence ~\cite{zagalo2004story}, Figure ~\ref{fig:russel-av-space}.

\img
{Russell's arousal and valence model}
{Russell's circumplex model with two axes of arousal and valence \footnotemark.}
{russell-av-space.pdf}
{russel-av-space}
\footnotetext{Photo credit: http://imagine-it.org/gamessurvey/}

% gtg
Both mentioned models for identifying emotions convey some practical issues in emotion measurement. In a HCI context, the stimuli for potential emotions may vary less than in human-human interaction (e.g., participant verbal expressions and body language) ~\cite{zhang2010service} and also the combination of evoked emotions ~\cite{peter2006emotion}. However with help of physiological signals and the fuzzy logic in the model we are going to use, such issues with our dimensional emotion models would be minimized. Though it is anticipated to observe different range of evoked emotions while interacting with play technologies compared to interacting with other humans in daily life. ~\cite{zhang2010service}. However our dimensional emotion models suffers some other problems. One problem is that arousal and valence are not independent and one can impact the other ~\cite{mandryk2007fuzzy}. Continuously capturing emotional experiences in this applied setting is of its other hallmarks. Subjective measures based on dimensional emotion theory, such as the Affect Grid ~\cite{russell1989affect} and the Self-Assessment Manikin ~\cite{bradley1994measuring}, allow for quick assessments of user emotional experiences but they may aggregate responses over the course of many events ~\cite{zhang2010service}. This work uses Mandryk et al. version of AV space ~\cite{mandryk2007fuzzy}. 

\subsection{Recognizing Emotion}

% gtg
Heart rate (HR), blood pressure, respiration, electrodermal activity (EDA) and galvanic skin response (GSR), as well as facial EMG (Electromyography) are of physiological variables correlated with various emotions. Interpreting physiological measures into emotion state can be difficult, due to noisy and inaccurate signals, however recent on-going studies in this area by Mandryk and Atkins ~\cite{mandryk2007fuzzy} presented a method to continuously identifying emotional states of the user while playing a computer game. Using the dimensional emotion model and the fuzzy logic, based on a set of physiological measures, in its first phase, their fuzzy model transforms GSR, HR, facial EMG (for frowning and smiling) into arousal and valence variables. In the second phase another fuzzy logic model is used to transform arousal and valence variables into five basic emotion states including: boredom, challenge, excitement, frustration and fun. Their study successfully revealed self-reported emotion states for fun, boredom and excitement are following the trends generated by their fuzzy transformation. The advantage of continuously and quantitatively assessing user's emotional state during an entire play by their fuzzy logic model is what makes their model perfect to be incorporated with real-time play technologies.

\subsection{Gameplay and The Concept of Flow}

% gtg
In computer games, gameplay is usually considered of key importance ~\cite{rollings2006fundamentals, malone1982makes}. One can define gameplay as the pattern defined through the game rules ~\cite{salen2004rules, pajares2008understanding} connection between player and the game ~\cite{laramee2002game} or challenges ~\cite{rollings2003andrew} of the game. In absence of a broadly accepted definition for gameplay, our focus here is targeted on one frequently mentioned element of it which is \textit{challenge}. To balance the challenge level or difficulty scale of the game, designers change many interacting parameters to create a gameplay somewhere between too easy to be boring and too hard to be frustrating ~\cite{koster2013theory}.

% gtg
Mihaly Csikszentmihalyi, in the mid 70s, in an attempt to explain happiness, introduced the concept of \textit{flow}. The feeling of complete and energized focus while engaged in an activity is what usually referred to as flow, this feeling also has an ambient sense of enjoyment and fulfillment ~\cite{csikszentmihalyi1990flow}. Flow is also referred to as the optimal experience or being in \textit{the zone}. Flow zone is an inspiring concept in flow theory and is illustrated in Figure ~\ref{fig:flow-zone}. What flow zone suggests, in order to sustain player's flow experience, is to balance the inherent challenge of the activity and the required player's ability (skills) to address and overcome it ~\cite{chen2007flow}. It avoids the activity to become so overwhelming by a challenge beyond player's ability and consequently generating anxiety; Also avoids failing to engage the player and become so boring due to a challenge level less than player's ability. However, this should be mentioned, we fortunately have tolerance for a temporary lack of stimulation, with an assumption of more is on the way. One should consider the flow zone as a fuzzy safe zone where the activity is not yet too challenging or boring ~\cite{csikszentmihalyi1990flow}.

\img
{Flow zone}
{Flow zone, the area where challenge and skill level match ~\cite{chen2007flow}.}
{flow-zone.pdf}
{flow-zone}

% gtg
Many video games offer only a simple narrow and static experience, which is shown with the red line in Figure ~\ref{fig:flow-zone}. This statically preset path might keep the typical player in the flow zone but will not be fun for the hardcore or novice player ~\cite{chen2007flow}. Kiel pointed two kinds of frustration during games, the at-game-frustration and in-game-frustration. The first is due to lack of skill during game playing and the second in caused by difficult game levels ~\cite{gilleade2004using}. Addressing these game balancing issues, in recent years many researches have been done on utilizing game AI and secondary inputs to dynamically adjust the difficulty level. Xiang et al. in their work on dynamic difficulty adjustment by facial expression ~\cite{xiang2013dynamic}. They have also controlled NPCs behaviors by reinforce learning algorithm ~\cite{spronck2004difficulty, andrade2005challenge}. Hunicke ~\cite{hunicke2004ai} used Hamlet system to predict when the player is repeatedly entering an undesirable loop, and help them get out of it, they have explored computational and design requirements for a dynamic difficulty adjustment system using probabilistic methods based on Half Life game engine. Joost ~\cite{westra2009adaptive} proposed an adaptation approach that uses expert knowledge for the adaptation. They used a game adaption model and organized agents to choose the most optimal task for the trainee, given the user model, the game flow and the capabilities of the agents. Hom ~\cite{hom2007automatic} used AI techniques to design balanced board games like checkers and Go by modifying the rules of the game, not just the rule parameters. Olesen has explored neuro-evolution methodologies to generate intelligent opponents in Real-Time Strategy (RTS) games and tried to adapt the challenge generated by the game opponents to match the skill of a player in real-time ~\cite{olesen2008real}.

%------------------------------------------------------------------------------

\section{System Implementation}
\label{sec:impl}

The purpose of this paper was to evaluate the impact of design choices for affect feedback on user experience. To evaluate this effect, we needed to implement three distinct components:
\begin{itemize}
\item {\bf Affect sensing}: A affect-detecting middlewear engine (AME) to translate between physiological indicators of affect to actionable game input.
\item {\bf Game Environment}: A game system with parameters suitable for adaptation via output from the sensed affect.
\item {\bf Experience Evaluator}: A series of validated instruments integrated with the game environment to determine user experience during the experiment.
\end{itemize}

Figure ~\ref{fig:system-design} shows a schematic flow diagram for the first two components, where an affect detecting system depicted on the right feeds data to a typical game engine depicted on the left-hand side of the diagram. 

\img
{Emotion adaptive game system design}
{Emotion adaptive game system design}
{system-design.pdf}
{system-design}

% gtg
\subsection{Affect Middlewear Engine}
\label{AME}
The Affect Middlewear Engine is the software unit developed to transform collected physiological data to their equivalent emotional state in real-time. While it is generally agreed that emotions can be inferred from three components: subjective experience (e.g. feeling joyous), expressive behavior (e.g. smiling), and physiological activation (e.g. arousal) ~\cite{scherer1993neuroscience}, the affect engine provides a framework for transformation of only physiological activations and some expressive behaviors. Figure ~\ref{fig:affect-engine} is a schematic view of the signal transformation pipeline. Applications such as games can easily integrate the affect engine where emotion recognition can offer adaptive control to maintain user interest and engagement. Once connected via sensors to the emotion recognition system, the affective state of the user can be captured continuously and in real-time, and used as a secondary input for an enhanced interaction experience. The AME runs in two states, calibration and adaptation. When calibrating, the system waits for user input, attempting to discern sensible boundaries for physiological normalization according to the process described in [mandryk and atkins]. After a set period of time, the system enters adaptation mode, where data is fed into the signal transformation stage, and from there to the game engine. For longer play sessions, the system will periodically re-enter the calibration state to compensate for drift in the physiological signals. In this manner the system compensates for the difficulty of globally bounding physiological signals by performing a series of temporally local bound approximations. 

While the affect engine is capable of interpreting multiple physiological signals and performing a full fuzzy logic-based emotion inference according to the approach described by Mandryk and Atkins ~\cite{mandryk2007fuzzy}, we constrained ourselves to a simpler linear mapping for this experiment. Specifically, GSR signals were measured using a Thought Technology ProComp Infinity encoder ~\cite{tt2013procomp}, connected to PC through a USB cable. Through the SensorLib (API), raw physiological inputs were received and basic filtering operations were performed. After the calibration period described above, the AME system began reporting normalized GSR signals to the game engine as a measure of player excitement or arousal ~\cite{aggag2011affective, tijs2009creating}.

\img
{Affect engine modules}
{Affect engine modules}
{affect-engine.pdf}
{affect-engine}

% TODO: revise
%Affect engine is implemented as a middleware system that runs parallel to the actual game engine. The physiological input data is first transferred to the sensor module of the affect engine ~\ref{subsec:sens-mdl}, where the real-time signal processing happens, this module may apply different forms of amplifying, filtering and feature selection on the physiological signals. Then the processes signal data continues to the next module which transforms it to estimated emotional states ~\ref{subsec:fuzzi}. The resulting data from the transformation module is then transferred to the layer that handles the game's internal logical state ~\ref{subsec:director}. The complexity of the AI layer in this section might vary greatly depending on the game. Based on the logical decisions made at this layer, other subsystems of the game-engine such as the physics and animation engine would collaborate and synthesize the game world for the player.

% TODO: revise
%The affect engine can switch between to major states: Processing State and the Calibration State. Dependent on the design we want to apply to influence players emotional state in any particular way, affect engine can be controlled to switch between these two states by different algorithms. In our setting, the affect engine priodically switch between these two states on preset time intervals to regularly calibrate the system with resent physiological feedback of the player.

% TODO: revise
%\subsection{Sensor Module} \label{subsec:sens-mdl}
%The sensor module consists of a Thought Technology ProComp Infinity encoder ~\cite{tt2013procomp}, connected to PC through a USB cable. SensorLib as the basic application programming interface (API) receives raw physiological inputs from the encoder driver and provides functionalities to apply different filters such as low-pass, high-pass, smoothing and shifting to the signal. Sensor module provides a generic interface for any type of sensor attached to the system, that makes interaction with different type of sensors much easier in fuzzification module ~\ref{subsec:fuzzi}.

% TODO: revise
%\subsection{Transformation Module} \label{subsec:fuzzi}
%This module functions through two separate phases; Then filtered signals are fuzzified using a set of fuzzy rules in the first phase of transformation. Then generated arousal and valence values are transformed into emotion values using another set of fuzzy rules in the second pass ~\cite{mandryk2007fuzzy}. While this module makes the affect engine capable of doing complex transformations from physiological signals to emotion values using different set of fuzzy rules, for this study we only targeted the normalized GSR value as an indicator of players excitement level.

% TODO: revise
%\subsection{The Director} \label{subsec:director}
%The logical subsystem integrated in the game-engine is called the director. In this subsystem the generated emotional state is received and with use of various logical components different adaptations can be applied to the game. Table ~\ref{tbl:adjustment-strategy} presents our exitement oriented adaptation strategy for three different adapted conditions of our study.

\subsection{Game Environment}
\label{game_env}
To evaluate the impact of feedback on player experience, it was also necessary to implement a game environment that could be linked to the output of the AME. We chose to implement a straightforward zombie survival game based on the Half Life 2 engine. A custom map (shown in Figure ~\ref{fig:map-of-level}) was implemented. The map was composed of a small outdoor area and three buildings. Zombies would spawn in waves from one of 10 points, and would undertake standard Half Life 2 zombie AI behavior, looking for the player and attacking with either thrown objects when distance (weakly damaging the player) or a melee attack when close (heavily damaging the player). A good default strategy for the player is to keep the zombies at a distance, eliminating them with their moderately powerful machine gun, and not closing to melee range. The player is tasked with surviving as many waves of zombies as possible, accrues a score based on the number of zombies killed. The player is equipped with a machine gun with a grenade which has unlimited ammunition but a limited number of grenades. Health packs, which restore player from received damage, and additional grenades are available at defined locations. If a player presses a button at that location, a health pack will dispense and the button will be disabled until a cool down timer has expired. Aspects of the player's abilities, the zombies' abilities and the environment can be adjusted in real time based on the output of the AME system.

Table ~\ref{tbl:adjustment-strategy} contains the types of adjustments that can occur. In this particular implementation, the system could be in one of three states based on the normalized GSR value supplied from the AME. If players fell below a threshold of excitement as indicated by normalized GSR, then the system inferred that they were bored and increased the difficulty of the game. If players were above a threshold of normalized GSR, the system inferred that they were over stimulated and made the game easier. If neither of these states were true, then the system assumed that they were playing normally and no adjustment occurred. The equations by which the game parameters were adjusted are also shown in Table ~\ref{tbl:adjustment-strategy}. While no action was taken unless normalized GSR was in the excited or bored band, once in that band, the game parameters adjusted continuously with the value of the GSR. Constants in the equations and the threshold values for excited and bored were adjusted manually, based on design experience and play testing prior to the experiment.

%Kevin it wasn't only the number of zombies being spawned which was adapted, but also it was the number of zombie crowd. That means, in a more difficult state, a larger zombie crowd was attackinig the player. The crowd size had a limit to not allow zombies of a wave be spawned all together and become over crowded. 
%Also the health pack was considered an evironment parameter as during the game, player didn't have that under control but simply using it. but I've considered the grenade as a player adaptation parameter, as players were practically planning strategies to use their grenades as a secondary attack. though these two really didn't have any much influence in different conditions as players were mostly not using them regularly and didn't notice any changes about them based on the post-experiment interviews.
Player modifcations were any modifications that directly effected player state, even if those modifications were mediated by the environment. Player speed enabled the player to more easily escape the zombies dangerous melee attacks, and was mapped directly to the player. The respawn rate of grenades and health packs was moderated by the environment (through the buttons the player had to press) but ultimately impacted the state of the player in their ability to inflict or take damage. The number of zombies spawned per unit time obviously increased the difficulty for the player. By increasing or decreasing the speed of the zombie with respect to the player made it more difficult or easier for the player to evade the zombies melee attacks. This manipulation is particularly interesting as it is the opposite of the speed adjustment for the player from a game balance, but not a game experience perspective. Finally, the environment itself was adjusted by increasing or descresing the amount of ambient fog, which was proportionate to the distance the player could see. By constraining the players viewing distance with increasing fog, zombies could approach closer, leaving the player with less time to target them before they closed to within melee range.

\subsection{Evaluation System}
Evaluation of the system was carried out in three major ways. First, all phsyiological signals were logged to ensure that the system was working correctly and as a basis for comparison. Second, game events were logged to track how the player reacted to adaptive game mechanics. Finally, players were given experience surveys after the completion of each level. In this analysis, the player experience surveys are the primary evaluation method because they directly link the experience to the manipulation.

\img
{Map of the level designed for our 4 condition experiment}
{Map of the level designed for our 4 condition experiment}
{map-of-level.png}
{map-of-level}

%-----------------------------------------------------------
\begin{table*}[!t]
\caption{Adjustment Strategy}
\label{tbl:adjustment-strategy}
\hfil
\centering
\begin{tabular}{lp{4cm}p{4cm}p{4cm}}
                     & Player                            & NPC                             & Environment \\
\hline
Excited              & Increase player speed \newline Increase grenade rate
                     & Decrease zombie speed \newline Decrease zombie crowd
                     & Decrease fog density \newline Increase med-pack rate  \\
\hline
Not excited          & Decrease player speed \newline Decrease grenade rate
                     & Increase zombie speed \newline Increase zombie crowd
                     & Increase fog density \newline Decrease med-pack rate  \\
\hline
Adaption \newline
equation             & $P_{speed} = 0.65 + 1.35 * Arousal$    \newline $G_{delay} = 40 - 20 * Arousal$
                     & $Z_{speed} = \frac{1}{0.30 + Arousal}$ \newline $Z_{crowd} = 3.75 - 2.5 * Arousal$
                     & $F_{start} = 70 + 380 * Arousal$       \newline $F_{end} = 500 + 1000 * Arousal$ \newline $M_{delay} = 100 - 60 * Arousal$ \\
\end{tabular}
\end{table*}
%-----------------------------------------------------------

%------------------------------------------------------------------------------

\section{Experimentation}
\label{sec:exprm}

% gtg
We performed a small user study to determine the impact of adaptation mechanism on player experience. After filling in consent forms consistent with our institutional ethics approval, data were recorded from 15 male and 1 female University students, aged between 18 and 32 years old. All participants felt they had at least intermediate computing skills. A third of participants have described themselves playing video games every day, while 41.2\% of them described themselves playing video games a few times per week and all but one a few times per month. All participants have used PCs as gaming system while 76.48\% of them also have used at least one of the four popular console platforms. All of participants had at least some experience with 3D shooting games like First Person Shooters, with 47.1\% have described themselves playing 3D shooting games many times, while another 41.2\% described themselves as experts in 3D shooting games. Only 11.8\% had limited or intermediate experience with 3D shooting games. 
%Among the participants only 5.9\% had intermediate experience in using mouse in games, 35.3\% of them declared using mouse in games for many times and other 58.8\% of them described themselves as experts in doing that.
%--Kevin likely not relevant.

% gtg
A four condition (Default, Player adapted, NPC adapted, Environment adapted) play session was employed to evaluate performance and excitement as dependent variables. An order 4 Latin square used to permute conditions between participants. Each game condition was lasted 5 minutes. Players were told to kill as many zombies as possible, and to die as few times as possible. After each condition, participants were asked to write their comments about particular changes they noticed under that condition and its effect on their gameplay. Then they were asked to filled out the intrinsic motivation inventory (IMI) questionnaire, the player experience of need satisfaction (PENS) questionnaire and the game engagement questionnaire (GEQ) to rate their experience. Filling the questionnaires between conditions was done during the minimum 7 minutes of resting time before the next condition begins. The resting time was meant to restore players baseline GSR levels. Because of the dynamic baselining, perfect resting GSR was not required prior to the next gameplay session. GSR sensors were recording players signals during both the play and the resting sessions from the beginning of the first condition to the ending of the last condition.

% gtg
To diminish noisy signals and make participants feel comfortable, the GSR sensors were attached to the participant's ring and index finger on their mouse hand, because mouse fingers tend to move much less than the keyboard hand in FPS gameplay. 
%Some participants used index and middle fingers to press mouse buttons and others used index and ring fingers to do that.

% Will need to be replaced with better description when new figures available.
Figure ~\ref{fig:gsr-signal} presents resulted signal values for a participant. From left to right the light-blue line indicate different conditions being played. When the line is declining towards its base value, that is the period that participant is asked to stop playing and instead relaxing and filling out the questionnaires. The blue line is the normalized GSR signal value of the participant which is used as an estimation of excitement level. The yellow, green and pink lines are showing the three different modes of Player, NPC and Environment parameters being adapted. From left to right the conditions have been played are the Environment, Default, Player and the NPC modes. For a better understanding of changes between signal values, some of signals have been shifted to a different range.

\dcimg
{Map of the level designed for our 4 condition experiment}
{Map of the level designed for our 4 condition experiment}
{gsr-signal.png}
{gsr-signal}

%table not necessary for paper, covered in text. Maintain for thesis though.
%-----------------------------------------------------------
%\begin{table}[h]
%\caption{Experiment procedure}
%\label{tbl:experiment-procedure}
%\centering
%\begin{tabular}{lr}
%\hline
%Activity                                         & min. \\
%\hline
%Greetings, Consent form                          & \~2   \\
%Installation of physiological sensors            & \~3   \\
%Introducing the game mechanics                   & \~2   \\
%Game condition a                                 & 5    \\
%Condition questionnaire a                        & 7    \\
%Game condition b                                 & 5    \\
%Condition questionnaire b                        & 7    \\
%Game condition c                                 & 5    \\
%Condition questionnaire c                        & 7    \\
%Game condition d                                 & 5    \\
%Condition questionnaire d                        & 7    \\
%Semi-structured post-game interview, debriefing  & \~5   \\ 
%Total                                            & \~60  \\
%\hline
%\end{tabular}
%\end{table}
%-----------------------------------------------------------

%------------------------------------------------------------------------------

\section{Results}
\label{sec:res}

% TODO: general results
% TODO: perceived results, participants comments

% gtg
Conditions are indicated by the following labels: Default (1), Player adapted (2), NPC adapted (3) and Environment adapted (4). In our analysis we wanted to consider the impact of three different adaptations on players performance and excitement. In this study performance is defined as the number of killed zombies during the 5 minutes play of each conditions, and we used normalized GSR signal as the excitement metric.

% gtg
Table ~\ref{tbl:pval-cnd-perf} presents performance value differences between the four conditions. A RCBD ANOVA used to block order of playing different conditions and also players' experience level as two extraneous factors. This analysis shows that there was a significant difference in performance values between conditions. Post-hoc analysis revealed performance values have been declined significantly under condition 3 (NPC adapted) compared to all other conditions (p \textless 0.05). However, no significant changes have been observed between the other three conditions. Table ~\ref{tbl:mean-cnd-perf} presents mean estimates of these conditions. While values in this table show improvement in performance values under conditions 2 and 4, the mean differences (Table ~\ref{tbl:mean-cnd-perf}) between these two conditions and condition 1 are not large enough to draw any significant conclusion.

% gtg
%Faham, more detailed data is needed here, we can discuss tomorrow over the phone
Observing player reactions to adaptations during gameplay, and also looking at their responses in the post-game interview, clearly explain the disadvantageous impacts of condition 3 on players. Players adapted more naturally to the changing pace of their own character, as they have full feedback control over the character's motions. Players had a more difficult time adapting to the changing speed of the zombies, as the NPCs enhanced abilities were not immediately obvious, and required the player to change their model of NPC behavior.
%Players naturally adapt themselves to engage and control their character to the pace of events in the game. Therefor their expectation about next events heavily relies on their prior understanding of the game. Players can easily grasp a feeling about how to control the main character, based on the numerous commands they send to the main character by pushing the control buttons, and the feedback they receive from it. Therefor they can quickly adapt their expectations about the main character behavior. On the other hand, players understanding about NPC components of the game, increase gradually during the play scenario generally by looking at NPC behavior, far slower than the how it happens about the main character. This lead condition 3 to be quite inefficient compared to other conditions in our setting.

%-----------------------------------------------------------
\begin{table}[h]
\caption{Mean of performance value in four conditions and their 95\% CI}
\label{tbl:mean-cnd-perf}
\centering
\begin{tabular}{llll}
\hline
Condition      &   Mean Est.      &   Lwr. Bnd.    &  Upr. Bnd.     \\
\hline
1              &   88.50          &   82.87        &  94.12         \\
2              &   102.25         &   96.62        &  107.87        \\
3              &   61.00          &   55.37        &  66.62         \\
4              &   100.75         &   95.12        &  106.37        \\
\hline
\end{tabular}
\end{table}
%-----------------------------------------------------------

%-----------------------------------------------------------
\begin{table}[h]
\caption{Multiple comparisons between performance value differences between conditions}
\label{tbl:pval-cnd-perf}
\centering
\begin{tabular}{lllll}
\hline
Condition \newline
Differences &   Difference  &   Lwr. Bnd.      &     Upr. Bnd.   &  P-value     \\
\hline
2-1         &    13.75      &     -11.52       &      39.02      &  0.325       \\
3-1         &   -27.50      &     -52.77       &      -2.22      &  0.035       \\
4-1         &    12.25      &     -13.02       &      37.52      &  0.408       \\
3-2         &   -41.25      &     -66.52       &     -15.97      &  0.005       \\
4-2         &    -1.50      &     -26.77       &      23.77      &  0.996       \\
4-3         &    39.75      &     14.47        &      65.02      &  0.006       \\
\hline
\end{tabular}
\end{table}
%-----------------------------------------------------------

Based on the model adequacy checking we can be confident RCBD ANOVA was a perfectly suitable model to analyze our data and the results are reliable Figure ~\ref{fig:residuals-vs-fitted-values-performance}, ~\ref{fig:residuals-vs-fitted-values-excitement}.

\img
{Plot of residuals vs. fitted values for player performance}
{Plot of residuals vs. fitted values for player performance}
{anova-residuals-vs-fitted-values-performance.pdf}
{residuals-vs-fitted-values-performance}

% gtg
Table ~\ref{tbl:pval-cnd-exct} presents differences between excitement values between the four conditions. This table shows a significant difference in excitement values between condition 2 and 1 (p = 0.028). The post-hoc analysis revealed participants felt more excited in condition 2 (Player adapted). However excitement differences between the other conditions were not significant. Table ~\ref{tbl:mean-cnd-exct} presents mean estimates of the excitement values. 
%Although at first glance it can be inferred from Table ~\ref{tbl:mean-cnd-exct} that mean of excitement values in adapted conditions 2,3 and 4, have been increased, based on the differences in Table ~\ref{tbl:pval-cnd-exct} we conclude that only excitement value in condition 2 is significantly larger than the default condition. The mean differences between other conditions are not large enough to draw any further conclusion. Also player reactions to adaptations during gameplay in addition to their responses in our post-game interview indicate players have been most easily influenced by adaptations applied to the main character.

% gtg
Collected player comments after playing each condition shows 50\% of players declared they have noticed adaptations in main character during condition 2; 31\% of participants could identify adaptations in zombies' speed and spawn rate during condition 3; While only 12.5\% of them identified environmental adaptations in fog density during the condition number 4. 
%Based on these results added to measured excitement values and performance differences between three adapted conditions we conclude, more indirect mechanical environment adaptations although easily observable by eyes, but are yet less noticeable during the play experience; And on the other hand direct mechanical adaptations are more easily detectable and therefor can quickly influence player's emotional state.
%Conclusions don't go here --Kevin

%-----------------------------------------------------------
\begin{table}[h]
\caption{Mean of excitement value in four conditions and their 95\% CI}
\label{tbl:mean-cnd-exct}
\centering
\begin{tabular}{llll}
\hline
Condition      &   Mean Est.      &   Lwr. Bnd.    &  Upr. Bnd.     \\
\hline
1              &   -9.60          &   -29.79       &  10.57         \\
2              &   46.48          &   26.30        &  66.67         \\
3              &   26.95          &   6.76         &  47.13         \\
4              &   22.99          &   2.81         &  43.18         \\
\hline
\end{tabular}
\end{table}
%-----------------------------------------------------------

%-----------------------------------------------------------
\begin{table}[h]
\caption{Multiple comparisons between excitement value differences between conditions}
\label{tbl:pval-cnd-exct}
\centering
\begin{tabular}{lllll}
\hline
Condition Differences &   Difference  &   Lwr. Bnd.      &     Upr. Bnd.   &  P-value     \\
\hline
2-1                   &    56.09      &       6.09       &     106.09      &  0.028       \\
3-1                   &    36.56      &     -13.43       &      86.56      &  0.173       \\
4-1                   &    32.60      &     -17.39       &      82.60      &  0.244       \\
3-2                   &   -19.53      &     -69.53       &      30.46      &  0.630       \\
4-2                   &   -23.48      &     -73.48       &      26.51      &  0.493       \\
4-3                   &    -3.95      &     -53.95       &      46.04      &  0.994       \\
\hline
\end{tabular}
\end{table}
%-----------------------------------------------------------

\img
{Plot of residuals vs. fitted values for player excitement}
{Plot of residuals vs. fitted values for player excitement}
{anova-residuals-vs-fitted-values-excitement.pdf}
{residuals-vs-fitted-values-excitement}

%------------------------------------------------------------------------------

\section{Discussion and Further Research}
\label{sec:discus}

% TODO: revise
Choosing a first-person shooter game for this study was a good decision to compare the three different adaptation modes. The FPS game had players both visually and mechanically engaged therefor changing various gameplay parameters had noticeably influenced most players emotional status. Source engine and Half Life 2 assets also was a perfect choice by letting us accessing the code of the engine to incorporate the affect engine. Also the Hammer editor had all needed tools to generate the map of the game.

% TODO: revise
The impact of main character adaptations on player's excitement level as shown in this study, can be easily understood by looking at what has already taken place in the industry. In fact changing main character parameters such as speed to impact players emotional state is nothing new, many game designers have used similar mechanisms to improve players' excitement level by somehow changing or transforming the main character's capabilities in certain moments. Application of such design decisions have become even more popular in recent years, Prince of Persia series, The Suffering, Onimusha and the God of War series are famous examples of such game titles. This work tried to improve dynamically adjusted game designs by comparing different adaptation approaches. However one should note different game mechanic adaptations can also happen along with certain non-mechanical adaptations such as changes in background soundtrack or applying certain color variations. We believe our study and the presented results in this work have applied a minimum amount of such non-mechanical adaptations to compare the three different mechanical adaptation conditions. We believe the calibration-adaptation algorithm we used for our study was compatible with the game play scenario we used in our study, however more work on this algorithm for other game scenarios is an interesting area for future work.

%------------------------------------------------------------------------------

\section{Conclusion}
\label{sec:conclusion}
% TODO: conclusion
We analysed the impact of different adaptions on player's performance and excitement level.

%------------------------------------------------------------------------------

\section*{Acknowledgment}
Thanks to GRAND, NSERC and the University of Saskatchewan for funding the study. Special thanks to Michael Kalyn for helping me with the SensorLib and TEVA libraries.

%------------------------------------------------------------------------------

\bibliographystyle{IEEEtran}
\bibliography{bibliography}
\end{document}

%------------------------------------------------------------------------------



